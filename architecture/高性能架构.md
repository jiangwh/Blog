# 高性能架构的思考

对于高性能架构的优化目标就是：少。

1、减少客户端到服务器连接。

2、减少客户端到最终读盘、落盘的链路。

3、减少客户端到服务器端读写的数据。



## 按照用户访问顺序

### UserAgent

​	页面做cache，缺陷无法主动失效。

​	做答题、验证，加少客户端发起的请求。

​	合并请求（如将多个css、js文件的请求合并为一个），减少对服务器的请求。

### CDN

​	做cdn的cache（此类cache的好处，就是可以主动失效），减少到服务器的请求。

### Firewall
  安全防护，减少到应用服务器的流量。


### Nginx/apache

​	做静态数据的cache。静态数据不仅仅是js、css、html。

​	zip压缩减少数据量。

### Api网关

​	限制流量/降级，减少请求数量到后端。

### 应用

​	做业务过滤，减少请求数量。	

​	

### Cache

​	缓存热点数据（广告的预热数据、秒杀商品、通过统计实时生成热点数据），增加命中率。减少请求到后端。

### 队列

​	缓冲入库

### 数据库代理层

​	hash/一致hash，加少到某一个数据库的请求数量。

​	范围区间

### 数据库

​	集群、读写分离

​	分库/分表/分区

​    1、通过业务进行分库。

​	2、通过数据分库（hash、一致hash）。	

​	3、水平切库（将不常字段分到其他库中去），减少数据库的容量。

